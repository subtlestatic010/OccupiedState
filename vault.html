<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="THE VAULT – Primary sources the regime classified, burned, or memory-holed. Mirrored forever.">
    <title>THE VAULT – Occupied State</title>
    <link rel="stylesheet" href="style.css">

    <!-- Mobile-proof green cross -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='40' fill='none' stroke='%230f0' stroke-width='12'/%3E%3Ccircle cx='50' cy='50' r='18' fill='none' stroke='%230f0' stroke-width='12'/%3E%3Cline x1='50' y1='10' x2='50' y2='90' stroke='%230f0' stroke-width='12'/%3E%3Cline x1='10' y1='50' x2='90' y2='50' stroke='%230f0' stroke-width='12'/%3E%3C/svg%3E">
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='40' fill='none' stroke='%230f0' stroke-width='12'/%3E%3Ccircle cx='50' cy='50' r='18' fill='none' stroke='%230f0' stroke-width='12'/%3E%3Cline x1='50' y1='10' x2='50' y2='90' stroke='%230f0' stroke-width='12'/%3E%3Cline x1='10' y1='50' x2='90' y2='50' stroke='%230f0' stroke-width='12'/%3E%3C/svg%3E">
    <link rel="mask-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='40' fill='none' stroke='%230f0' stroke-width='12'/%3E%3Ccircle cx='50' cy='50' r='18' fill='none' stroke='%230f0' stroke-width='12'/%3E%3Cline x1='50' y1='10' x2='50' y2='90' stroke='%230f0' stroke-width='12'/%3E%3Cline x1='10' y1='50' x2='90' y2='50' stroke='%230f0' stroke-width='12'/%3E%3C/svg%3E" color="#0f0">

    <style>
        body { background:#000; color:#0f0; margin:0; font-family:'Courier New',monospace; overflow-x:hidden; }
        header { text-align:center; padding:2rem 1rem; position:relative; }
        h1 { font-size:3.5rem; text-shadow:0 0 20px #0f0; margin:2rem 0 1rem; }
        .tagline { font-size:1.3rem; color:#0a8; margin:1.5rem 0 2rem; line-height:1.4; }

        #searchInput {
            display:block; margin:2rem auto; padding:1rem; width:88%; max-width:600px;
            background:rgba(0,0,0,0.5); border:1px solid #0f0; color:#0f0;
            font-family:monospace; font-size:1.2rem; text-shadow:0 0 5px #0f0;
        }
        #searchInput:focus { box-shadow:0 0 25px rgba(0,255,0,0.5); outline:none; }

        /* === TOUCH-FRIENDLY ANIMATED HAMBURGER MENU === */
        .topnav { position:relative; width:100%; }
        .menu-icon {
            display:none;
            position:absolute; right:1rem; top:1.2rem;
            font-size:2.8rem; cursor:pointer; color:#0f0; text-shadow:0 0 20px #0f0;
            z-index:1001; transition:transform .3s, text-shadow .3s;
        }
        .menu-icon:active { transform:scale(0.9); text-shadow:0 0 40px #0f0; }

        .nav-links {
            display:flex; flex-wrap:wrap; gap:1.5rem; justify-content:center; padding:1rem 0;
            transition:all .4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .nav-links a {
            color:#0f0; text-decoration:none; font-weight:bold;
            text-shadow:0 0 10px #0f0; transition:all .3s;
            padding:0.5rem 0; opacity:1; transform:translateY(0);
        }
        .nav-links a:hover { text-shadow:0 0 30px #0f0; transform:scale(1.1); }

        /* Mobile: slide-down + fade + stagger animation */
        @media (max-width:768px) {
            .menu-icon { display:block; }

            .nav-links {
                position:absolute; top:100%; left:0; right:0;
                background:#000; border:2px solid #0f0; box-shadow:0 10px 40px rgba(0,255,0,0.7);
                flex-direction:column; padding:2rem 1rem;
                max-height:0; overflow:hidden; opacity:0;
                transform:translateY(-20px);
                transition:max-height .5s ease, opacity .5s ease, transform .5s ease;
            }
            .nav-links.active {
                max-height:80vh; opacity:1; transform:translateY(0);
            }
            .nav-links a {
                opacity:0; transform:translateY(30px);
                animation:fadeSlideUp .6s forwards;
            }
            .nav-links.active a:nth-child(1) { animation-delay:0.05s; }
            .nav-links.active a:nth-child(2) { animation-delay:0.10s; }
            .nav-links.active a:nth-child(3) { animation-delay:0.15s; }
            .nav-links.active a:nth-child(4) { animation-delay:0.20s; }
            .nav-links.active a:nth-child(5) { animation-delay:0.25s; }
            .nav-links.active a:nth-child(6) { animation-delay:0.30s; }
            .nav-links.active a:nth-child(7) { animation-delay:0.35s; }
        }

        @keyframes fadeSlideUp {
            to { opacity:1; transform:translateY(0); }
        }

        /* Vault styles – unchanged */
        .vault-main { max-width:1200px; margin:4rem auto; padding:0 1rem; display:flex; flex-direction:column; gap:4rem; }
        .vault-section { background:rgba(0,255,0,0.08); border:1px solid #0f0; padding:3rem 2rem; box-shadow:0 0 15px rgba(0,255,0,0.3); transition:.4s; }
        .vault-section:hover { box-shadow:0 0 30px rgba(0,255,0,0.6); }
        .vault-section h2 { color:#0f0; text-shadow:0 0 12px #0f0; margin-bottom:2rem; font-size:2rem; text-align:center; }
        .vault-section h2:hover { animation:glitch .3s linear; }
        .vault-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(340px,1fr)); gap:2rem; }
        .vault-item { background:rgba(0,255,0,0.05); border:1px solid #0f0; padding:2rem; transition:.4s; box-shadow:0 0 10px rgba(0,255,0,0.2); }
        .vault-item:hover { background:rgba(0,255,0,0.2); box-shadow:0 0 40px rgba(0,255,0,0.5); transform:translateY(-8px); }
        .vault-item h3 { color:#0f0; margin-bottom:1rem; text-shadow:0 0 10px #0f0; }
        .vault-item h3:hover { animation:glitch .3s linear; }
        .vault-item .desc { color:#8f8; line-height:1.5; }
        .vault-item .meta { color:#0a8; margin-top:1rem; }
        .vault-item a { color:#0f0; font-weight:bold; text-decoration:none; }
        .vault-item a:hover { text-shadow:0 0 15px #0f0; }

        @keyframes glitch {
            0%   { text-shadow:0.05em 0 0 #f00,-0.03em 0 0 #0f0,-0.04em 0 0 #00f; }
            15%  { text-shadow:0.05em -0.03em 0 #f00,0.025em 0.035em 0 #0f0,-0.05em -0.02em 0 #00f; }
            50%  { text-shadow:0.05em 0.035em 0 #f00,0.03em 0 0 #0f0,0 0 0 #00f; }
            100% { text-shadow:0.025em 0 0 #f00,-0.025em -0.025em 0 #0f0,-0.04em 0 0 #00f; }
        }

        footer { text-align:center; padding:3rem; color:#0a8; }

        @media (max-width:480px) {
            h1 { font-size:2.6rem; }
            .tagline { font-size:1.1rem; }
            .vault-grid { grid-template-columns:1fr; }
            .vault-section { padding:2rem 1rem; }
            .vault-item { padding:1.5rem; }
        }
    </style>
</head>
<body>

    <header>
        <h1>THE VAULT</h1>
        <p class="tagline">Primary sources the regime classified, burned, or memory-holed.<br>We mirrored them. Forever.</p>
        <input type="text" id="searchInput" placeholder="Search vault: keywords, titles, ops...">

        <div class="topnav">
            <span class="menu-icon" onclick="toggleMenu()">≡</span>
            <div class="nav-links">
                <a href="index.html">DISPATCHES</a>
                <a href="vault.html">THE VAULT</a>
                <a href="analysis.html">ANALYSIS</a>
                <a href="timeline.html">TIMELINE</a>
                <a href="blog.html">BLOG</a>
                <a href="call.html">CALL TO ACTION</a>
                <a href="about.html">ABOUT</a>
            </div>
        </div>
    </header>

    <main class="vault-main" id="vault-main"></main>

    <footer>
        <p>All files hosted on decentralized mirrors • If one dies, ten more rise</p>
    </footer>

    <script>
        function toggleMenu() {
            document.querySelector('.nav-links').classList.toggle('active');
        }

        const vault = [ /* your full vault array – 100% untouched */ ];

        const main = document.getElementById('vault-main');
        const searchInput = document.getElementById('searchInput');
        const categories = [...new Set(vault.map(item => item.category))];

        function renderVault(filter = '') {
            main.innerHTML = '';
            const lowerFilter = filter.toLowerCase();
            categories.forEach((cat, index) => {
                const filteredItems = vault.filter(item => item.category === cat &&
                    (item.title.toLowerCase().includes(lowerFilter) || item.desc.toLowerCase().includes(lowerFilter)));
                if (filteredItems.length === 0) return;
                const section = document.createElement('section');
                section.className = 'vault-section';
                section.dataset.shadowIntensity = index % 3 + 1;
                const h2 = document.createElement('h2');
                h2.textContent = cat;
                section.appendChild(h2);
                const grid = document.createElement('div');
                grid.className = 'vault-grid';
                filteredItems.forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'vault-item';
                    div.innerHTML = `
                        <h3>${item.title}</h3>
                        <p class="desc">${item.desc}</p>
                        <p class="meta">${item.size} • <a href="${item.file}" target="_blank">DOWNLOAD / OPEN →</a></p>
                    `;
                    grid.appendChild(div);
                });
                section.appendChild(grid);
                main.appendChild(section);
            });
        }

        renderVault();
        searchInput.addEventListener('keyup', e => renderVault(e.target.value));
    </script>
</body>
</html>
